// Generated by ./scripts/test.py:
//
// ./scripts/test.py -c tests/test_seek.toml -o tests/test_seek.t.a.c
//

#include "runners/test_runner.h"

#ifndef COUNT
#define COUNT_i                  TEST_IMPLICIT_DEFINE_COUNT+0
#define COUNT                    TEST_DEFINE(COUNT_i)
#endif
#ifndef SIZE
#define SIZE_i                   TEST_IMPLICIT_DEFINE_COUNT+1
#define SIZE                     TEST_DEFINE(SIZE_i)
#endif
#ifndef SKIP
#define SKIP_i                   TEST_IMPLICIT_DEFINE_COUNT+2
#define SKIP                     TEST_DEFINE(SKIP_i)
#endif

intmax_t __test__test_seek_read__COUNT__0(__attribute__((unused)) void *data) {
    return 132;
}

intmax_t __test__test_seek_read__SKIP__0(__attribute__((unused)) void *data) {
    return 4;
}

intmax_t __test__test_seek_read__SKIP__1(__attribute__((unused)) void *data) {
    return 128;
}

intmax_t __test__test_seek_read__COUNT__2(__attribute__((unused)) void *data) {
    return 200;
}

intmax_t __test__test_seek_read__SKIP__2(__attribute__((unused)) void *data) {
    return 10;
}

intmax_t __test__test_seek_read__SKIP__3(__attribute__((unused)) void *data) {
    return 100;
}

intmax_t __test__test_seek_read__SKIP__4(__attribute__((unused)) void *data) {
    return 1;
}

intmax_t __test__test_seek_read__SKIP__5(__attribute__((unused)) void *data) {
    return 2;
}

const test_define_t __test__test_seek_read__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [COUNT_i                 ] = {__test__test_seek_read__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__0, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_read__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__1, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_read__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__2, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_read__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__3, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_read__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__4, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_read__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_read__SKIP__5, NULL},
    },
};

void __test__test_seek_read__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_read
    #line 13 "tests/test_seek.toml"
    lfs_t lfs;
    lfs_format(&lfs, cfg) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_t file;
    lfs_file_open(&lfs, &file, "kitty",
            LFS_O_WRONLY | LFS_O_CREAT | LFS_O_APPEND) => 0;
    size_t size = strlen("kittycatcat");
    uint8_t buffer[1024];
    memcpy(buffer, "kittycatcat", size);
    for (int j = 0; j < COUNT; j++) {
        lfs_file_write(&lfs, &file, buffer, size);
    }
    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;

    lfs_mount(&lfs, cfg) => 0;
    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDONLY) => 0;

    lfs_soff_t pos = -1;
    size = strlen("kittycatcat");
    for (int i = 0; i < SKIP; i++) {
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "kittycatcat", size) => 0;
        pos = lfs_file_tell(&lfs, &file);
    }
    assert(pos >= 0);

    lfs_file_seek(&lfs, &file, pos, LFS_SEEK_SET) => pos;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_rewind(&lfs, &file) => 0;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_CUR) => size;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, size, LFS_SEEK_CUR) => 3*size;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, pos, LFS_SEEK_SET) => pos;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, -size, LFS_SEEK_CUR) => pos;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, -size, LFS_SEEK_END) >= 0 => 1;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    size = lfs_file_size(&lfs, &file);
    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_CUR) => size;

    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 144 "tests/test_seek.t.a.c"
}

intmax_t __test__test_seek_write__COUNT__0(__attribute__((unused)) void *data) {
    return 132;
}

intmax_t __test__test_seek_write__SKIP__0(__attribute__((unused)) void *data) {
    return 4;
}

intmax_t __test__test_seek_write__SKIP__1(__attribute__((unused)) void *data) {
    return 128;
}

intmax_t __test__test_seek_write__COUNT__2(__attribute__((unused)) void *data) {
    return 200;
}

intmax_t __test__test_seek_write__SKIP__2(__attribute__((unused)) void *data) {
    return 10;
}

intmax_t __test__test_seek_write__SKIP__3(__attribute__((unused)) void *data) {
    return 100;
}

intmax_t __test__test_seek_write__SKIP__4(__attribute__((unused)) void *data) {
    return 1;
}

intmax_t __test__test_seek_write__SKIP__5(__attribute__((unused)) void *data) {
    return 2;
}

const test_define_t __test__test_seek_write__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [COUNT_i                 ] = {__test__test_seek_write__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__0, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_write__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__1, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_write__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__2, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_write__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__3, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_write__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__4, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_write__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_write__SKIP__5, NULL},
    },
};

void __test__test_seek_write__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_write
    #line 86 "tests/test_seek.toml"
    lfs_t lfs;
    lfs_format(&lfs, cfg) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_t file;
    lfs_file_open(&lfs, &file, "kitty",
            LFS_O_WRONLY | LFS_O_CREAT | LFS_O_APPEND) => 0;
    size_t size = strlen("kittycatcat");
    uint8_t buffer[1024];
    memcpy(buffer, "kittycatcat", size);
    for (int j = 0; j < COUNT; j++) {
        lfs_file_write(&lfs, &file, buffer, size);
    }
    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;

    lfs_mount(&lfs, cfg) => 0;
    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDWR) => 0;

    lfs_soff_t pos = -1;
    size = strlen("kittycatcat");
    for (int i = 0; i < SKIP; i++) {
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "kittycatcat", size) => 0;
        pos = lfs_file_tell(&lfs, &file);
    }
    assert(pos >= 0);

    memcpy(buffer, "doggodogdog", size);
    lfs_file_seek(&lfs, &file, pos, LFS_SEEK_SET) => pos;
    lfs_file_write(&lfs, &file, buffer, size) => size;

    lfs_file_seek(&lfs, &file, pos, LFS_SEEK_SET) => pos;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "doggodogdog", size) => 0;

    lfs_file_rewind(&lfs, &file) => 0;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    lfs_file_seek(&lfs, &file, pos, LFS_SEEK_SET) => pos;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "doggodogdog", size) => 0;

    lfs_file_seek(&lfs, &file, -size, LFS_SEEK_END) >= 0 => 1;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "kittycatcat", size) => 0;

    size = lfs_file_size(&lfs, &file);
    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_CUR) => size;

    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 261 "tests/test_seek.t.a.c"
}

intmax_t __test__test_seek_boundary_write__COUNT__0(__attribute__((unused)) void *data) {
    return 132;
}

const test_define_t __test__test_seek_boundary_write__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [COUNT_i                 ] = {__test__test_seek_boundary_write__COUNT__0, NULL},
    },
};

void __test__test_seek_boundary_write__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_boundary_write
    #line 144 "tests/test_seek.toml"
    lfs_t lfs;
    lfs_format(&lfs, cfg) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_t file;
    lfs_file_open(&lfs, &file, "kitty",
            LFS_O_WRONLY | LFS_O_CREAT | LFS_O_APPEND) => 0;
    size_t size = strlen("kittycatcat");
    uint8_t buffer[1024];
    memcpy(buffer, "kittycatcat", size);
    for (int j = 0; j < COUNT; j++) {
        lfs_file_write(&lfs, &file, buffer, size);
    }
    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;

    lfs_mount(&lfs, cfg) => 0;
    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDWR) => 0;

    size = strlen("hedgehoghog");
    const lfs_soff_t offsets[] = {512, 1020, 513, 1021, 511, 1019, 1441};

    for (unsigned i = 0; i < sizeof(offsets) / sizeof(offsets[0]); i++) {
        lfs_soff_t off = offsets[i];
        memcpy(buffer, "hedgehoghog", size);
        lfs_file_seek(&lfs, &file, off, LFS_SEEK_SET) => off;
        lfs_file_write(&lfs, &file, buffer, size) => size;
        lfs_file_seek(&lfs, &file, off, LFS_SEEK_SET) => off;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "hedgehoghog", size) => 0;

        lfs_file_seek(&lfs, &file, 0, LFS_SEEK_SET) => 0;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "kittycatcat", size) => 0;

        lfs_file_seek(&lfs, &file, off, LFS_SEEK_SET) => off;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "hedgehoghog", size) => 0;

        lfs_file_sync(&lfs, &file) => 0;

        lfs_file_seek(&lfs, &file, 0, LFS_SEEK_SET) => 0;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "kittycatcat", size) => 0;

        lfs_file_seek(&lfs, &file, off, LFS_SEEK_SET) => off;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        memcmp(buffer, "hedgehoghog", size) => 0;
    }

    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 328 "tests/test_seek.t.a.c"
}

intmax_t __test__test_seek_out_of_bounds__COUNT__0(__attribute__((unused)) void *data) {
    return 132;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__0(__attribute__((unused)) void *data) {
    return 4;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__1(__attribute__((unused)) void *data) {
    return 128;
}

intmax_t __test__test_seek_out_of_bounds__COUNT__2(__attribute__((unused)) void *data) {
    return 200;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__2(__attribute__((unused)) void *data) {
    return 10;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__3(__attribute__((unused)) void *data) {
    return 100;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__4(__attribute__((unused)) void *data) {
    return 2;
}

intmax_t __test__test_seek_out_of_bounds__SKIP__5(__attribute__((unused)) void *data) {
    return 3;
}

const test_define_t __test__test_seek_out_of_bounds__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__0, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__COUNT__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__1, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__2, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__COUNT__2, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__3, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__4, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_out_of_bounds__SKIP__0, NULL},
        [SKIP_i                  ] = {__test__test_seek_out_of_bounds__SKIP__5, NULL},
    },
};

void __test__test_seek_out_of_bounds__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_out_of_bounds
    #line 208 "tests/test_seek.toml"
    lfs_t lfs;
    lfs_format(&lfs, cfg) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_t file;
    lfs_file_open(&lfs, &file, "kitty",
            LFS_O_WRONLY | LFS_O_CREAT | LFS_O_APPEND) => 0;
    size_t size = strlen("kittycatcat");
    uint8_t buffer[1024];
    memcpy(buffer, "kittycatcat", size);
    for (int j = 0; j < COUNT; j++) {
        lfs_file_write(&lfs, &file, buffer, size);
    }
    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDWR) => 0;

    size = strlen("kittycatcat");
    lfs_file_size(&lfs, &file) => COUNT*size;
    lfs_file_seek(&lfs, &file, (COUNT+SKIP)*size,
            LFS_SEEK_SET) => (COUNT+SKIP)*size;
    lfs_file_read(&lfs, &file, buffer, size) => 0;

    memcpy(buffer, "porcupineee", size);
    lfs_file_write(&lfs, &file, buffer, size) => size;

    lfs_file_seek(&lfs, &file, (COUNT+SKIP)*size,
            LFS_SEEK_SET) => (COUNT+SKIP)*size;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "porcupineee", size) => 0;

    lfs_file_seek(&lfs, &file, COUNT*size,
            LFS_SEEK_SET) => COUNT*size;
    lfs_file_read(&lfs, &file, buffer, size) => size;
    memcmp(buffer, "\0\0\0\0\0\0\0\0\0\0\0", size) => 0;

    lfs_file_seek(&lfs, &file, -((COUNT+SKIP)*size),
            LFS_SEEK_CUR) => LFS_ERR_INVAL;
    lfs_file_tell(&lfs, &file) => (COUNT+1)*size;

    lfs_file_seek(&lfs, &file, -((COUNT+2*SKIP)*size),
            LFS_SEEK_END) => LFS_ERR_INVAL;
    lfs_file_tell(&lfs, &file) => (COUNT+1)*size;

    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 439 "tests/test_seek.t.a.c"
}

intmax_t __test__test_seek_inline_write__SIZE__0(__attribute__((unused)) void *data) {
    return 2;
}

intmax_t __test__test_seek_inline_write__SIZE__1(__attribute__((unused)) void *data) {
    return 4;
}

intmax_t __test__test_seek_inline_write__SIZE__2(__attribute__((unused)) void *data) {
    return 128;
}

intmax_t __test__test_seek_inline_write__SIZE__3(__attribute__((unused)) void *data) {
    return 132;
}

const test_define_t __test__test_seek_inline_write__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [SIZE_i                  ] = {__test__test_seek_inline_write__SIZE__0, NULL},
    },
    {
        [SIZE_i                  ] = {__test__test_seek_inline_write__SIZE__1, NULL},
    },
    {
        [SIZE_i                  ] = {__test__test_seek_inline_write__SIZE__2, NULL},
    },
    {
        [SIZE_i                  ] = {__test__test_seek_inline_write__SIZE__3, NULL},
    },
};

void __test__test_seek_inline_write__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_inline_write
    #line 260 "tests/test_seek.toml"
    lfs_t lfs;
    lfs_format(&lfs, cfg) => 0;
    lfs_mount(&lfs, cfg) => 0;
    lfs_file_t file;
    lfs_file_open(&lfs, &file, "tinykitty",
            LFS_O_RDWR | LFS_O_CREAT) => 0;
    int j = 0;
    int k = 0;

    uint8_t buffer[1024];
    memcpy(buffer, "abcdefghijklmnopqrstuvwxyz", 26);
    for (unsigned i = 0; i < SIZE; i++) {
        lfs_file_write(&lfs, &file, &buffer[j++ % 26], 1) => 1;
        lfs_file_tell(&lfs, &file) => i+1;
        lfs_file_size(&lfs, &file) => i+1;
    }

    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_SET) => 0;
    lfs_file_tell(&lfs, &file) => 0;
    lfs_file_size(&lfs, &file) => SIZE;
    for (unsigned i = 0; i < SIZE; i++) {
        uint8_t c;
        lfs_file_read(&lfs, &file, &c, 1) => 1;
        c => buffer[k++ % 26];
    }

    lfs_file_sync(&lfs, &file) => 0;
    lfs_file_tell(&lfs, &file) => SIZE;
    lfs_file_size(&lfs, &file) => SIZE;

    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_SET) => 0;
    for (unsigned i = 0; i < SIZE; i++) {
        lfs_file_write(&lfs, &file, &buffer[j++ % 26], 1) => 1;
        lfs_file_tell(&lfs, &file) => i+1;
        lfs_file_size(&lfs, &file) => SIZE;
        lfs_file_sync(&lfs, &file) => 0;
        lfs_file_tell(&lfs, &file) => i+1;
        lfs_file_size(&lfs, &file) => SIZE;
        if (i < SIZE-2) {
            uint8_t c[3];
            lfs_file_seek(&lfs, &file, -1, LFS_SEEK_CUR) => i;
            lfs_file_read(&lfs, &file, &c, 3) => 3;
            lfs_file_tell(&lfs, &file) => i+3;
            lfs_file_size(&lfs, &file) => SIZE;
            lfs_file_seek(&lfs, &file, i+1, LFS_SEEK_SET) => i+1;
            lfs_file_tell(&lfs, &file) => i+1;
            lfs_file_size(&lfs, &file) => SIZE;
        }
    }

    lfs_file_seek(&lfs, &file, 0, LFS_SEEK_SET) => 0;
    lfs_file_tell(&lfs, &file) => 0;
    lfs_file_size(&lfs, &file) => SIZE;
    for (unsigned i = 0; i < SIZE; i++) {
        uint8_t c;
        lfs_file_read(&lfs, &file, &c, 1) => 1;
        c => buffer[k++ % 26];
    }

    lfs_file_sync(&lfs, &file) => 0;
    lfs_file_tell(&lfs, &file) => SIZE;
    lfs_file_size(&lfs, &file) => SIZE;

    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 541 "tests/test_seek.t.a.c"
}

intmax_t __test__test_seek_reentrant_write__COUNT__0(__attribute__((unused)) void *data) {
    return 4;
}

intmax_t __test__test_seek_reentrant_write__COUNT__1(__attribute__((unused)) void *data) {
    return 64;
}

intmax_t __test__test_seek_reentrant_write__COUNT__2(__attribute__((unused)) void *data) {
    return 128;
}

const test_define_t __test__test_seek_reentrant_write__defines[][TEST_IMPLICIT_DEFINE_COUNT+3] = {
    {
        [COUNT_i                 ] = {__test__test_seek_reentrant_write__COUNT__0, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_reentrant_write__COUNT__1, NULL},
    },
    {
        [COUNT_i                 ] = {__test__test_seek_reentrant_write__COUNT__2, NULL},
    },
};

void __test__test_seek_reentrant_write__run(__attribute__((unused)) struct lfs_config *cfg) {
    // test case test_seek_reentrant_write
    #line 333 "tests/test_seek.toml"
    lfs_t lfs;
    int err = lfs_mount(&lfs, cfg);
    if (err) {
        lfs_format(&lfs, cfg) => 0;
        lfs_mount(&lfs, cfg) => 0;
    }
    lfs_file_t file;
    uint8_t buffer[1024];
    err = lfs_file_open(&lfs, &file, "kitty", LFS_O_RDONLY);
    assert(!err || err == LFS_ERR_NOENT);
    if (!err) {
        if (lfs_file_size(&lfs, &file) != 0) {
            lfs_file_size(&lfs, &file) => 11*COUNT;
            for (int j = 0; j < COUNT; j++) {
                memset(buffer, 0, 11+1);
                lfs_file_read(&lfs, &file, buffer, 11) => 11;
                assert(memcmp(buffer, "kittycatcat", 11) == 0 ||
                       memcmp(buffer, "doggodogdog", 11) == 0);
            }
        }
        lfs_file_close(&lfs, &file) => 0;
    }

    lfs_file_open(&lfs, &file, "kitty", LFS_O_WRONLY | LFS_O_CREAT) => 0;
    if (lfs_file_size(&lfs, &file) == 0) {
        for (int j = 0; j < COUNT; j++) {
            strcpy((char*)buffer, "kittycatcat");
            size_t size = strlen((char*)buffer);
            lfs_file_write(&lfs, &file, buffer, size) => size;
        }
    }
    lfs_file_close(&lfs, &file) => 0;

    strcpy((char*)buffer, "doggodogdog");
    size_t size = strlen((char*)buffer);

    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDWR) => 0;
    lfs_file_size(&lfs, &file) => COUNT*size;
    // seek and write using quadratic probing to touch all
    // 11-byte words in the file
    lfs_off_t off = 0;
    for (int j = 0; j < COUNT; j++) {
        off = (5*off + 1) % COUNT;
        lfs_file_seek(&lfs, &file, off*size, LFS_SEEK_SET) => off*size;
        lfs_file_read(&lfs, &file, buffer, size) => size;
        assert(memcmp(buffer, "kittycatcat", size) == 0 ||
               memcmp(buffer, "doggodogdog", size) == 0);
        if (memcmp(buffer, "doggodogdog", size) != 0) {
            lfs_file_seek(&lfs, &file, off*size, LFS_SEEK_SET) => off*size;
            strcpy((char*)buffer, "doggodogdog");
            lfs_file_write(&lfs, &file, buffer, size) => size;
            lfs_file_seek(&lfs, &file, off*size, LFS_SEEK_SET) => off*size;
            lfs_file_read(&lfs, &file, buffer, size) => size;
            assert(memcmp(buffer, "doggodogdog", size) == 0);
            lfs_file_sync(&lfs, &file) => 0;
            lfs_file_seek(&lfs, &file, off*size, LFS_SEEK_SET) => off*size;
            lfs_file_read(&lfs, &file, buffer, size) => size;
            assert(memcmp(buffer, "doggodogdog", size) == 0);
        }
    }
    lfs_file_close(&lfs, &file) => 0;

    lfs_file_open(&lfs, &file, "kitty", LFS_O_RDWR) => 0;
    lfs_file_size(&lfs, &file) => COUNT*size;
    for (int j = 0; j < COUNT; j++) {
        lfs_file_read(&lfs, &file, buffer, size) => size;
        assert(memcmp(buffer, "doggodogdog", size) == 0);
    }
    lfs_file_close(&lfs, &file) => 0;
    lfs_unmount(&lfs) => 0;
    #line 641 "tests/test_seek.t.a.c"
}

__attribute__((section("_test_suites"), aligned(1)))
const struct test_suite __test__test_seek__suite = {
    .name = "test_seek",
    .path = "tests/test_seek.toml",
    .flags = TEST_REENTRANT,
    .define_names = (const char *const[TEST_IMPLICIT_DEFINE_COUNT+3]){
        [COUNT_i                 ] = "COUNT",
        [SIZE_i                  ] = "SIZE",
        [SKIP_i                  ] = "SKIP",
    },
    .define_count = TEST_IMPLICIT_DEFINE_COUNT+3,
    .cases = (const struct test_case[]){
        {
            .name = "test_seek_read",
            .path = "tests/test_seek.toml:3",
            .flags = 0,
            .permutations = 6,
            .defines = (const test_define_t*)__test__test_seek_read__defines,
            .run = __test__test_seek_read__run,
        },
        {
            .name = "test_seek_write",
            .path = "tests/test_seek.toml:76",
            .flags = 0,
            .permutations = 6,
            .defines = (const test_define_t*)__test__test_seek_write__defines,
            .run = __test__test_seek_write__run,
        },
        {
            .name = "test_seek_boundary_write",
            .path = "tests/test_seek.toml:141",
            .flags = 0,
            .permutations = 1,
            .defines = (const test_define_t*)__test__test_seek_boundary_write__defines,
            .run = __test__test_seek_boundary_write__run,
        },
        {
            .name = "test_seek_out_of_bounds",
            .path = "tests/test_seek.toml:198",
            .flags = 0,
            .permutations = 6,
            .defines = (const test_define_t*)__test__test_seek_out_of_bounds__defines,
            .run = __test__test_seek_out_of_bounds__run,
        },
        {
            .name = "test_seek_inline_write",
            .path = "tests/test_seek.toml:257",
            .flags = 0,
            .permutations = 4,
            .defines = (const test_define_t*)__test__test_seek_inline_write__defines,
            .run = __test__test_seek_inline_write__run,
        },
        {
            .name = "test_seek_reentrant_write",
            .path = "tests/test_seek.toml:328",
            .flags = TEST_REENTRANT,
            .permutations = 3,
            .defines = (const test_define_t*)__test__test_seek_reentrant_write__defines,
            .run = __test__test_seek_reentrant_write__run,
        },
    },
    .case_count = 6,
};

